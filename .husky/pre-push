cd "$(git rev-parse --show-toplevel)" || exit 1

echo "Running test suite before push..."

if ! npm test; then
  echo "Tests failed. Push aborted."
  exit 1
fi

echo "Tests passed. Proceeding with push."